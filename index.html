<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Custom Journey Builder Activity</title>

    <script type="text/javascript" src="jquery.min.js"></script>
    <script type="text/javascript" src="require.js"></script>
    <script type="text/javascript" src="postmonger.js"></script>        
    <script type="text/javascript">
      (function () {
        var config = {
          baseUrl: "",
        };

        var dependencies = ["customActivity"];

        require(config, dependencies);
      })();

      function moverParaDireita() {
        const listaEsquerda = document.getElementById('idfield');
        const listaDireita = document.getElementById('listaDireita');
    
        // Percorre todas as opções selecionadas na lista da esquerda
        for (let i = 0; i < listaEsquerda.options.length; i++) {
            if (listaEsquerda.options[i].selected) {
                // Cria uma nova opção na lista da direita com o mesmo valor e texto
                const novaOpcao = document.createElement('option');
                novaOpcao.value = listaEsquerda.options[i].value;
                novaOpcao.text = listaEsquerda.options[i].text;
                listaDireita.add(novaOpcao);
    
                // Remove a opção da lista da esquerda
                listaEsquerda.remove(i);
                // Ajusta o índice para não pular elementos após a remoção
                i--;
            }
        }
    }
    
    function moverParaEsquerda() {
            // Lógica similar para mover da direita para a esquerda, com as operações invertidas

            // Percorre todas as opções selecionadas na lista da esquerda
        for (let i = 0; i < listaDireita.options.length; i++) {
            if (listaEsquerda.options[i].selected) {
                // Cria uma nova opção na lista da direita com o mesmo valor e texto
                const novaOpcao = document.createElement('option');
                novaOpcao.value = listaDireita.options[i].value;
                novaOpcao.text = listaDireita.options[i].text;
                listaDireita.add(novaOpcao);
    
                // Remove a opção da lista da esquerda
                listaDireita.remove(i);
                // Ajusta o índice para não pular elementos após a remoção
                i--;
            }
        }
    }
    </script>

    <!--Styles-->
    <style type="text/css">
      body {
        padding: 20px;
        margin: 0;
      }
      .step {
        display: none;
      }
      #step1 {
        display: block;
      }
    </style>
  </head>
  <body>
    <div id="step1" class="step">
      Selecione os atributos desejados:</div>
      <select class="slds-select" id="idField" multiple></select> 
      <div>
        <button onclick="moverParaDireita()">direita</button>
        <button onclick="moverParaEsquerda()">esquerda</button>
    </div>
    <div>
        <h3>Lista de Opções Selecionadas</h3>
        <select id="listaDireita" multiple>
        </select>
    </div>    
    </div>
    <div id="step2" class="step">
      Definir Endpoint:
    </div>
    <div id="step3" class="step">
      Salvar Definições:
      
    </div>
  </body>
</html>